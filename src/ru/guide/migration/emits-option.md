---
title: Добавлена опция emits
badges:
  - new
---

# Добавлена опция `emits` <MigrationBadges :badges="$frontmatter.badges" />

## Обзор

Vue 3 теперь предоставляет опцию `emits`, похожую на существующую опцию `props`. Её можно использовать для объявления событий, которые могут быть сгенерированы компонентом для своих родителей.

## Поведение в 2.x

Во Vue 2 можно объявлять входные параметры, которые компонент получает, но нет возможности объявить какие события он может генерировать:

```vue
<template>
  <div>
    <p>{{ text }}</p>
    <button @click="$emit('accepted')">OK</button>
  </div>
</template>

<script>
  export default {
    props: ['text']
  }
</script>
```

## Поведение в 3.x

Аналогично входным параметрам, теперь можно определить события которые генерирует компонент с помощью опции `emits`:

```vue
<template>
  <div>
    <p>{{ text }}</p>
    <button @click="$emit('accepted')">OK</button>
  </div>
</template>

<script>
  export default {
    props: ['text'],
    emits: ['accepted']
  }
</script>
```

Опция также принимает объект, что позволяет указать валидаторы для аргументов, которые передаются вместе с генерируемым событием, аналогично валидации при объявлении `props`.

Для получения дополнительной информации, ознакомьтесь с [документацией API для этой возможности](../../api/options-data.md#emits).

## Стратегия миграции

Настоятельно рекомендуется документировать все события, которые может генерировать компонент с помощью `emits`.

Это особенно важно из-за [удаления модификатора `.native`](v-on-native-modifier-removed.md). Теперь любой слушатель события, не указанный в `emits`, будет добавлен в свойство `$attrs` компонента, что по умолчанию станет привязывать его к корневому узлу компонента.

### Пример

Для компонентов, которые переопределяют нативные события для своих родителей, это приведёт к генерации двух событий:

```vue
<template>
  <button @click="$emit('click', $event)">OK</button>
</template>

<script>
export default {
  emits: [] // без объявленного события
}
</script>
```

Когда родитель прослушивает событие `click` на компоненте:

```html
<my-button @click="handleClick"></my-button>
```

обработчик события будет вызван _дважды_:

- Один раз от `$emit()`.
- Один раз от нативного обработчика события, привязанного к корневому элементу.

Здесь есть два варианта:

1. Корректно объявить событие `click`. Это полезно, если действительно добавите некоторую логику в обработчик события в `<my-button>`.
2. Удалить повторную генерацию события, так как родитель может легко отслеживать нативные события, без добавления `.native`. Подходит в тех случаях, когда действительно генерируете заново событие в любом случае.

## См. также

- [Соответствующий RFC](https://github.com/vuejs/rfcs/blob/master/active-rfcs/0030-emits-option.md)
- [Руководство по миграции — Модификатор `.native` удалён](v-on-native-modifier-removed.md)
- [Руководство по миграции — Удалены `$listeners`](listeners-removed.md)
- [Руководство по миграции — Свойство `$attrs` содержит `class` и `style`](attrs-includes-class-style.md)
- [Руководство по миграции — Изменения в API render-функций](render-function-api.md)
